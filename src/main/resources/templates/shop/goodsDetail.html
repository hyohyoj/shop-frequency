<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìƒí’ˆ ìƒì„¸</title>
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="stylesheet" type="text/css" href="/plugin/slick/slick.css"/>
    <link rel="stylesheet" type="text/css" href="/plugin/slick/slick-theme.css"/>
    <!-- CDN -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
    <!-- Local -->
    <script type="text/javascript" src="/js/jquery.min.js"></script>
    <script type="text/javascript" src="/plugin/slick/slick.js"></script>
</head>
<style>
$wh : #ffffff;
$bk : #000000;
$pt :#ffc0cb;

.slick-arrow {
    width: 50px;
    height: 50px;
    background: rgba($bk, 0.2);
    border-radius: 50%;
    transition: background 0.5s;
}
.slick-arrow:hover {
    background: rgba($pt, 0.9);
}
.slick-arrow:hover:before {
    background: rgba($pt, 0.9);
}
.slick-arrow:before {
    transition: all 0.5s;
}

.slick-prev {
    left: 25px !important;
    z-index: 9;
}

.slick-next {
    right: 25px !important;
    z-index: 9;
}
</style>
<script th:inline="javascript">

    $(function(){
        $('#slider-div').slick({
            slidesToShow : 1,		// í•œ í™”ë©´ì— ë³´ì—¬ì§ˆ ì»¨í…ì¸  ê°œìˆ˜
            slidesToScroll : 1,		//ìŠ¤í¬ë¡¤ í•œë²ˆì— ì›€ì§ì¼ ì»¨í…ì¸  ê°œìˆ˜
            arrows : true, 		// ì˜†ìœ¼ë¡œ ì´ë™í•˜ëŠ” í™”ì‚´í‘œ í‘œì‹œ ì—¬ë¶€
            dots : true, 		// ìŠ¤í¬ë¡¤ë°” ì•„ë˜ ì ìœ¼ë¡œ í˜ì´ì§€ë„¤ì´ì…˜ ì—¬ë¶€
            autoplay : true,			// ìë™ ìŠ¤í¬ë¡¤ ì‚¬ìš© ì—¬ë¶€
            autoplaySpeed : 4000, 		// ìë™ ìŠ¤í¬ë¡¤ ì‹œ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ (ms)
            pauseOnHover : true,		// ìŠ¬ë¼ì´ë“œ ì´ë™	ì‹œ ë§ˆìš°ìŠ¤ í˜¸ë²„í•˜ë©´ ìŠ¬ë¼ì´ë” ë©ˆì¶”ê²Œ ì„¤ì •
            vertical : false,		// ì„¸ë¡œ ë°©í–¥ ìŠ¬ë¼ì´ë“œ ì˜µì…˜
            prevArrow : "<button type='button' class='slick-prev'>Previous</button>",		// ì´ì „ í™”ì‚´í‘œ ëª¨ì–‘ ì„¤ì •
            nextArrow : "<button type='button' class='slick-next'>Next</button>",		// ë‹¤ìŒ í™”ì‚´í‘œ ëª¨ì–‘ ì„¤ì •
            dotsClass : "slick-dots", 	//ì•„ë˜ ë‚˜ì˜¤ëŠ” í˜ì´ì§€ë„¤ì´ì…˜(ì ) css class ì§€ì •
            draggable : true, 	//ë“œë˜ê·¸ ê°€ëŠ¥ ì—¬ë¶€
        });
    })

    $(document).ready(function () {
        $("#addQuantity").on("click", function() {
            let total = $("#goodsQuantity").val();
            total++;
            $("#goodsQuantity").val(total);
        });

        $("#removeQuantity").on("click", function() {
            let total = $("#goodsQuantity").val();

            if(total <= 1) {
                alert("ìˆ˜ëŸ‰ì€ 1ê°œ ì´ìƒì´ì—¬ì•¼ í•©ë‹ˆë‹¤.");
                $("#goodsQuantity").val('1');
                return false;
            }

            total--;
            $("#goodsQuantity").val(total);
        });

        $("#goodsQuantity").on("keyup", function(e) {
        });

        $("#cartBtn").on("click", function() {

            if($("#goodsQuantity").val() < 1) {
                alert("ìˆ˜ëŸ‰ì€ 1ê°œ ì´ìƒì´ì—¬ì•¼ í•©ë‹ˆë‹¤.");
                $("#goodsQuantity").val('1');
                return false;
            }

            let params = {
                'goods_no' : $("#goods_no").val(),
                'goods_quantity' : $("#goodsQuantity").val(),
                'option_no' : $("#option_no").val() ? $("#option_no").val() : null,
            }

            $.ajax({
                type : "POST",
                url : "/shop/cartInsert",
                dataType:"text",
                contentType : 'application/json; charset=utf-8',
                data : JSON.stringify(params),
                success : function(data){
                    if(parseInt(data) == 1) {
                        alert("ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
                    } else if(parseInt(data) == 2) {
                        alert("í•´ë‹¹ ìƒí’ˆì´ ì¥ë°”êµ¬ë‹ˆì— ì¡´ì¬í•©ë‹ˆë‹¤.");
                    }
                }
            });
        })

    })

</script>
<body>

<input type="hidden" id="goods_no" th:value="${goods.goods_no}" />
<input type="hidden" id="option_no" th:value="${goods.option_no}" />

<div class="content-area">
    <div class="content-top">
        <div class="ct-left-area">
            <div class="image-wrap">
                <!-- slick-slider -->
                <div id="slider-div">
                    <th:block th:each="img, status : ${goods.imagePathArray}">
                        <div><img th:src="${img}" /></div>
                    </th:block>
                </div>
            </div>
        </div>
        <div class="ct-right-area">
            <div class="title">
                <h1 th:text="${goods.goods_title}"></h1>
            </div>
            <hr>
            <div class="desc">
                <span th:text="${goods.goods_desc}">ìƒí’ˆì„¤ëª…</span>
            </div>
            <hr>
            <div class="frequency-yn">
                <th:block th:if="${#strings.equals(goods.frequency_yn, 'Y')}">
                    <span>â€» <span style="color:darkolivegreen;"><b>í”„ë¦¬í€€ì‹œ</b></span> ì ìš© ìƒí’ˆì…ë‹ˆë‹¤.<span style="font-size: 20px;">ğŸ™†</span></span>
                </th:block>
                <th:block th:unless="${#strings.equals(goods.frequency_yn, 'Y')}">
                    <span>â€» <span style="color:darkolivegreen;"><b>í”„ë¦¬í€€ì‹œ</b></span> ì ìš© ìƒí’ˆì´ ì•„ë‹™ë‹ˆë‹¤.<span style="font-size: 20px;">ğŸ™…</span></span>
                </th:block>
            </div>
            <hr>
            <div class="price">
                <span th:text="|${#numbers.formatInteger(goods.goods_price, 3, 'COMMA')}ì›|"></span>
            </div>
            <hr>
            <div class="button">
                <div class="button-quantity">
                    ì£¼ë¬¸ìˆ˜ëŸ‰
                    <input id="goodsQuantity" type="text" value="1" oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');">  <!-- ìˆ«ìë§Œ ì…ë ¥ ê°€ëŠ¥í•˜ê²Œ ì •ê·œì‹ ì²˜ë¦¬ -->
                    <span>
                        <button id="addQuantity">+</button>
                        <button id="removeQuantity">-</button>
                    </span>
                </div>
                <div class="button-set">
                    <a style="cursor: pointer;" id="cartBtn" class="btn-cart">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</a>
                    <a style="cursor: pointer;" class="btn-buy">ë°”ë¡œêµ¬ë§¤</a>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>